"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[948],{6948:function(t,e,n){n.r(e),n.d(e,{Contacts:function(){return q},default:function(){return z}});var a=n(4942),r=n(1413),s=n(9439),c={contactForm:"ContactForm_contactForm__y0Rca",inputLabel:"ContactForm_inputLabel__LEeFC",formInput:"ContactForm_formInput__GszVU",formBtn:"ContactForm_formBtn__qZGY3"},o=n(2791),i=n(9434),l=n(6052),u=function(t){return t.contacts.contacts.items},d=function(t){return t.contacts.filter},m=function(t){return t.contacts.sortOptions},h=function(t){return t.contacts.contacts.isLoading},f=function(t){return t.contacts.contacts.error},p=function(){return{contacts:(0,i.v9)(u),filter:(0,i.v9)(d),sortOptions:(0,i.v9)(m),error:(0,i.v9)(f),isLoading:(0,i.v9)(h)}},x=n(184),_=function(){var t=(0,o.useState)({name:"",number:""}),e=(0,s.Z)(t,2),n=e[0],u=e[1],d=(0,i.I0)(),m=p().contacts,h=function(t){var e=t.target.value.split(" ").map((function(t){return t.trim()})).join(" ");u((function(n){return(0,r.Z)((0,r.Z)({},n),{},(0,a.Z)({},t.target.name,e))}))};return(0,x.jsx)("section",{className:c.formSection,children:(0,x.jsxs)("form",{className:c.contactForm,onSubmit:function(t){t.preventDefault();var e=n.name,a=n.number,r={name:e,number:a};m.find((function(t){return t.name.toLowerCase()===e.toLowerCase()||t.number===a}))?alert("".concat(e," or ").concat(a," is already in contacts")):(d((0,l.uK)(r)),u({name:"",number:""}))},children:[(0,x.jsxs)("label",{className:c.inputLabel,children:["Name",(0,x.jsx)("input",{className:c.formInput,onChange:h,value:n.name,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan.",required:!0})]}),(0,x.jsxs)("label",{className:c.inputLabel,children:["Number",(0,x.jsx)("input",{className:c.formInput,onChange:h,value:n.number,type:"tel",name:"number",pattern:"^\\+?\\d{1,4}[-.\\s]?\\(?\\d{1,3}\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}$",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,x.jsx)("button",{className:c.formBtn,type:"submit",children:"Add Contact"})]})})},C={filterContainer:"Filter_filterContainer__8G57N",filterTitle:"Filter_filterTitle__5SDqd",filterInput:"Filter_filterInput__1Cysk"},j=n(1538),b=function(){var t=(0,o.useState)({input:""}),e=(0,s.Z)(t,2),n=e[0],a=e[1],c=(0,i.I0)();(0,o.useEffect)((function(){c((0,j.xO)(n.input))}),[n.input,c]);return(0,x.jsx)("section",{className:C.filterSection,children:(0,x.jsxs)("div",{className:C.filterContainer,children:[(0,x.jsx)("p",{className:C.filterTitle,children:"Search contacts by name or number"}),(0,x.jsx)("input",{className:C.filterInput,type:"text",onChange:function(t){a((function(e){return(0,r.Z)((0,r.Z)({},e),{},{input:t.target.value})}))},value:n.input})]})})},N={sortContainer:"Sort_sortContainer__2DpMN",sortOptionContainer:"Sort_sortOptionContainer__IMYq3",sortWrapper:"Sort_sortWrapper__VqLXH",sortTitle:"Sort_sortTitle__YmJcn",sortOption:"Sort_sortOption__dF0Zh",sortButton:"Sort_sortButton__CPLkG",switch:"Sort_switch__4uxDt",slider:"Sort_slider__9FHYi"},v=n(9806),g=n(1632),L=function(){var t=(0,o.useState)({name:!1,order:!1}),e=(0,s.Z)(t,2),n=e[0],c=e[1],l=(0,i.I0)();(0,o.useEffect)((function(){l((0,j.cs)(n))}),[n,l]);var u=function(t){var e=t.target.dataset.value,n=t.target.checked;c((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},e,n))}))};return(0,x.jsx)("section",{className:N.sortSection,children:(0,x.jsxs)("div",{className:N.sortContainer,children:[(0,x.jsx)("p",{className:N.sortTitle,children:"Sort contacts by name"}),(0,x.jsxs)("div",{className:N.sortOptionContainer,children:[(0,x.jsx)("p",{className:N.sortOption,children:"First Name"}),(0,x.jsx)("div",{className:N.sortWrapper,children:(0,x.jsxs)("label",{className:N.switch,children:[(0,x.jsx)("input",{"data-value":"name",type:"checkbox",onChange:u}),(0,x.jsx)("span",{className:N.slider})]})}),(0,x.jsx)("p",{className:N.sortOption,children:"Last Name"})]}),(0,x.jsxs)("div",{className:N.sortOptionContainer,children:[(0,x.jsx)(v.G,{icon:g.bDz,size:"lg",style:{color:"#4e4e4e"}}),(0,x.jsx)("div",{className:N.sortWrapper,children:(0,x.jsxs)("label",{className:N.switch,children:[(0,x.jsx)("input",{"data-value":"order",type:"checkbox",onChange:u}),(0,x.jsx)("span",{className:N.slider})]})}),(0,x.jsx)(v.G,{icon:g.M2Q,size:"lg",style:{color:"#4e4e4e"}})]})]})})},S={contactsListSection:"ContactList_contactsListSection__cWqG0",contactsList:"ContactList_contactsList__7leRd",contactItem:"ContactList_contactItem__ppNQ5",contactItemNumer:"ContactList_contactItemNumer__VuqTQ",contactsTable:"ContactList_contactsTable__dYkGk",editableContact:"ContactList_editableContact__AOyjp"},k=n(6059),I=n.n(k),y=n(3433),F="Buttons_contactItemBtn__ykTTg",Z=function(t){var e=t.editableContactId,n=t.contactId,a=t.handleSaveClick,r=t.handleEditClick,s=t.handleCancelClick,c=(0,i.I0)();return(0,x.jsx)(x.Fragment,{children:e===n?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:F,onClick:function(){return a(n)},children:"Save"}),(0,x.jsx)("button",{className:F,onClick:s,children:"Cancel"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:F,onClick:function(){return r(n)},children:"Edit"}),(0,x.jsx)("button",{className:F,onClick:function(){return c((0,l.GK)(n))},children:"Delete"})]})})},T=n(1686),w=function(){var t=(0,o.useState)(null),e=(0,s.Z)(t,2),n=e[0],a=e[1],c=(0,o.useRef)({}),u=(0,i.I0)(),d=p(),m=d.contacts,h=d.filter,f=d.sortOptions,_=function(t,e){var n=e.name,a=e.order,r=n?"lastName":"firstName",s=a?"desc":"asc";return(0,y.Z)(t).sort((function(t,e){var n,a;return"firstName"===r?(n=t.name.split(" ")[0],a=e.name.split(" ")[0]):"lastName"===r&&(n=t.name.split(" "),a=e.name.split(" "),n=n[n.length-1],a=a[a.length-1]),"asc"===s?n.localeCompare(a):a.localeCompare(n)}))}(m,f),C=function(t,e){var n=e.toLowerCase();return n?t.filter((function(t){return t.name.toLowerCase().includes(n)||t.number.includes(n)})):t}(_,h),j=function(t){a(t),c.current[t]=(0,r.Z)({},m.find((function(e){return e.id===t})))},b=function(){a(null),c.current={}},N=function(t){m.filter((function(e){return e.id!==t})).find((function(e){return e.name.toLowerCase()===c.current[t].name.toLowerCase()||e.number===c.current[t].number}))?T.Notify.failure("".concat(c.current[t].name," is already in contacts. Please check and resubmit")):(u((0,l.Tk)({editedContact:c.current[t]})),a(null),c.current={})},v=function(t,e){var n=t.target.value,a=t.currentTarget.dataset.value;c.current[e][a]=n};return(0,x.jsx)("section",{className:S.contactsListSection,children:(0,x.jsxs)("table",{className:S.contactsTable,children:[(0,x.jsxs)("thead",{children:[(0,x.jsx)("tr",{children:(0,x.jsx)("th",{colSpan:3,children:(0,x.jsx)("h1",{children:"Contacts"})})}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Name"}),(0,x.jsx)("th",{children:"Number"}),(0,x.jsx)("th",{children:"Actions"})]})]}),(0,x.jsx)("tbody",{children:C.length>0?(0,x.jsx)(x.Fragment,{children:C.map((function(t){return(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{children:[" ",n===t.id?(0,x.jsx)(I(),{className:S.editableContact,html:t.name,disabled:!1,"data-value":"name",onChange:function(e){return v(e,t.id)}}):t.name]}),(0,x.jsx)("td",{children:n===t.id?(0,x.jsx)(I(),{className:S.editableContact,html:t.number,disabled:!1,"data-value":"number",onChange:function(e){return v(e,t.id)}}):t.number}),(0,x.jsx)("td",{children:(0,x.jsx)(Z,{contactId:t.id,editableContactId:n,handleEditClick:j,handleCancelClick:b,handleSaveClick:N})})]},t.id)}))}):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:3,className:S.noContacts,children:"No contacts meet search criteria."})})})]})})},O={contactsTitle:"Contacts_contactsTitle__9axPf"},G=n(8094),q=function(){var t=(0,i.I0)(),e=p(),n=e.contacts,a=e.isLoading,r=(0,G.a)(),s=r.isLoggedIn,c=r.user;return(0,o.useEffect)((function(){s&&t((0,l.yF)())}),[t,s]),(0,x.jsxs)("section",{className:O.contacts,children:[!a&&(0,x.jsx)("h1",{className:O.contactsTitle,children:"".concat(c.name," Contacts")}),(0,x.jsx)(_,{}),a&&(0,x.jsx)("h5",{children:"Loading..."}),n.length>=2?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(b,{}),(0,x.jsx)(L,{}),(0,x.jsx)(w,{})]}):1===n.length?(0,x.jsx)(w,{}):n.length<1&&!a?(0,x.jsx)("h5",{children:"No contacts found. Complete the above form to begin adding contacts."}):null]})},z=q}}]);
//# sourceMappingURL=948.9cea8b8b.chunk.js.map