"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[324],{2324:function(t,n,e){e.r(n),e.d(n,{Contacts:function(){return it},default:function(){return ot}});var a=e(4942),c=e(1413),i=e(9439),o="ContactsForm_addContactButton__eAEyH",s="ContactsForm_inputBox__og9Yo",r="ContactsForm_input__UjXFK",l=e(2791),u=e(9434),d=e(6052),m=function(t){return t.contacts.contacts.items},f=function(t){return t.contacts.filter},x=function(t){return t.contacts.sortOptions},h=function(t){return t.contacts.contacts.isLoading},p=function(t){return t.contacts.contacts.error},j=function(){return{contacts:(0,u.v9)(m),filter:(0,u.v9)(f),sortOptions:(0,u.v9)(x),error:(0,u.v9)(p),isLoading:(0,u.v9)(h)}},Z=e(4554),C=e(3466),v=e(9788),g=e(6429),b=e(9952),N=e(3329),_=e(9860),I=e(1686),L=e(184);function k(){var t=(0,l.useState)(!1),n=(0,i.Z)(t,2),e=n[0],m=n[1],f=(0,l.useState)({name:"",number:""}),x=(0,i.Z)(f,2),h=x[0],p=x[1],k=(0,u.I0)(),S=j().contacts,y=function(t){var n=t.target.value.split(" ").map((function(t){return t.trim()})).join(" ");p((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t.target.name,n))}))};return(0,L.jsxs)(Z.Z,{children:[(0,L.jsxs)(Z.Z,{className:s,children:[(0,L.jsx)(g.Z,{className:r,name:"name",label:"Contact Name",onChange:y,value:h.name,type:"text",required:!0,InputProps:{startAdornment:(0,L.jsx)(C.Z,{position:"start",children:(0,L.jsx)(b.Z,{})})},variant:"standard"}),(0,L.jsx)(g.Z,{className:r,name:"number",label:"Contact Number",onChange:y,value:h.number,type:"tel",required:!0,InputProps:{startAdornment:(0,L.jsx)(C.Z,{position:"start",children:(0,L.jsx)(v.Z,{})})},variant:"standard"})]}),(0,L.jsx)(Z.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,L.jsx)(_.Z,{className:o,onClick:function(t){t.preventDefault(),m(!0);var n=h.name,e=h.number,a={name:n,number:e};return S.find((function(t){return t.name.toLowerCase()===n.toLowerCase()||t.number===e}))?(I.Notify.warning("".concat(n," or ").concat(e," is already in contacts")),void m(!1)):n&&e?(k((0,d.uK)(a)).then((function(){return m(!1)})),void p({name:"",number:""})):(I.Notify.failure("Please fill out all fields"),void m(!1))},loading:e,loadingPosition:"center",startIcon:(0,L.jsx)(N.Z,{}),variant:"contained",type:"submit",children:(0,L.jsx)("span",{children:"Save"})})})]})}var S=e(1538),y=e(585);function w(){var t=(0,l.useState)({input:""}),n=(0,i.Z)(t,2),e=n[0],a=n[1],o=(0,u.I0)();(0,l.useEffect)((function(){o((0,S.xO)(e.input))}),[e.input,o]);return(0,L.jsx)(Z.Z,{sx:{width:"100%",marginTop:"20px"},children:(0,L.jsx)(g.Z,{label:"Filter Name or Number",id:"outlined-start-adornment",sx:{width:"100%"},variant:"filled",onChange:function(t){a((function(n){return(0,c.Z)((0,c.Z)({},n),{},{input:t.target.value})}))},value:e.input,InputProps:{endAdornment:(0,L.jsx)(C.Z,{position:"end",children:(0,L.jsx)(y.Z,{})})}})})}var T="ContactsSort_sortToggleSection__HQBhm",A="ContactsSort_sortToggleContainer__uHAxq",B=e(7924),D=e(5527),E=e(388),F=e(3238),P=e(2715),O=e(111),q=e(6502),H=e(6326);function K(){var t=(0,l.useState)({name:"firstName",order:"asc"}),n=(0,i.Z)(t,2),e=n[0],a=n[1],o=(0,l.useState)("left"),s=(0,i.Z)(o,2),r=s[0],d=s[1],m=(0,l.useState)("left"),f=(0,i.Z)(m,2),x=f[0],h=f[1],p=(0,u.I0)();(0,l.useEffect)((function(){p((0,S.cs)(e))}),[e,p]);var j=function(t){switch(t.target.closest("button").id){case"firstName":d("left"),a((function(t){return(0,c.Z)((0,c.Z)({},t),{},{name:"firstName"})}));break;case"lastName":d("right"),a((function(t){return(0,c.Z)((0,c.Z)({},t),{},{name:"lastName"})}));break;case"asc":h("left"),a((function(t){return(0,c.Z)((0,c.Z)({},t),{},{order:"asc"})}));break;case"desc":h("right"),a((function(t){return(0,c.Z)((0,c.Z)({},t),{},{order:"desc"})}))}};return(0,L.jsx)(Z.Z,{className:T,children:(0,L.jsxs)(D.Z,{className:A,elevation:4,sx:{display:"flex",justifyContent:"center"},children:[(0,L.jsxs)(F.Z,{color:"primary",size:"small",value:r,exclusive:!0,onChange:j,"aria-label":"text alignment",children:[(0,L.jsx)(E.Z,{id:"firstName",value:"left","aria-label":"left aligned",children:(0,L.jsx)(P.Z,{})}),(0,L.jsx)(E.Z,{id:"lastName",value:"right","aria-label":"right aligned",children:(0,L.jsx)(O.Z,{})})]}),(0,L.jsx)(B.Z,{variant:"inset",flexItem:!0,orientation:"vertical",sx:{mx:1,my:.5,color:"#007bff"}}),(0,L.jsxs)(F.Z,{color:"primary",size:"small",value:x,exclusive:!0,onChange:j,"aria-label":"text alignment",children:[(0,L.jsx)(E.Z,{id:"asc",value:"left","aria-label":"left aligned",children:(0,L.jsx)(H.Z,{})}),(0,L.jsx)(E.Z,{id:"desc",value:"right","aria-label":"right aligned",children:(0,L.jsx)(q.Z,{})})]})]})})}var z={contactsListSection:"ContactList_contactsListSection__cWqG0",contactListItem:"ContactList_contactListItem__3th7-",editableContact:"ContactList_editableContact__AOyjp",contactName:"ContactList_contactName__wLcl6",contactNumber:"ContactList_contactNumber__aD17w"},G=e(6059),Q=e.n(G),R=e(3433),U=e(4557),W=e(1286),X=e(6933),Y=e(645),J=e(6711),M=e(383),V={speedDial:"ContactsItemActions_speedDial__63y41"},$=e(2802),tt=[{icon:(0,L.jsx)(Y.Z,{}),tooltip:"Edit"},{icon:(0,L.jsx)(N.Z,{}),tooltip:"Save"},{icon:(0,L.jsx)(J.Z,{}),tooltip:"Cancel"},{icon:(0,L.jsx)(M.Z,{}),tooltip:"Delete"}];function nt(t){var n=t.editableContactId,e=t.contactId,a=t.handleSaveClick,c=t.handleEditClick,o=t.handleCancelClick,s=(0,l.useState)(!1),r=(0,i.Z)(s,2),m=r[0],f=r[1],x=(0,u.I0)();return(0,L.jsx)(Z.Z,{sx:{},children:(0,L.jsx)(U.Z,{sx:{position:"relative"},ariaLabel:"SpeedDial tooltip example",className:V.speedDial,icon:(0,L.jsx)($.Z,{openIcon:(0,L.jsx)(W.Z,{})}),direction:"left",onClose:function(){return f(!1)},onOpen:function(){return f(!0)},open:m,children:n===e?[(0,L.jsx)(X.Z,{className:V.contactItemBtn,icon:tt[1].icon,tooltipTitle:tt[1].tooltip,onClick:function(){a(e)}},"save"),(0,L.jsx)(X.Z,{className:V.contactItemBtn,icon:tt[2].icon,tooltipTitle:tt[2].tooltip,onClick:function(){o()}},"cancel")]:[(0,L.jsx)(X.Z,{className:V.contactItemBtn,icon:tt[0].icon,tooltipTitle:tt[0].tooltip,onClick:function(){c(e)}},"edit"),(0,L.jsx)(X.Z,{className:V.contactItemBtn,icon:tt[3].icon,tooltipTitle:tt[3].tooltip,onClick:function(){x((0,d.GK)(e))}},"delete")]})})}var et=function(){var t=(0,l.useState)(null),n=(0,i.Z)(t,2),e=n[0],a=n[1],o=(0,l.useRef)({}),s=(0,u.I0)(),r=j(),m=r.contacts,f=r.filter,x=r.sortOptions,h=function(t,n){var e=n.name,a=n.order,c=e,i=a;return(0,R.Z)(t).sort((function(t,n){var e,a;return"firstName"===c?(e=t.name.split(" ")[0],a=n.name.split(" ")[0]):"lastName"===c&&(e=t.name.split(" "),a=n.name.split(" "),e=e[e.length-1],a=a[a.length-1]),"asc"===i?e.localeCompare(a):a.localeCompare(e)}))}(m,x),p=function(t,n){var e=n.toLowerCase();return e?t.filter((function(t){return t.name.toLowerCase().includes(e)||t.number.includes(e)})):t}(h,f),Z=function(t){a(t),o.current[t]=(0,c.Z)({},m.find((function(n){return n.id===t})))},C=function(){a(null),o.current={}},v=function(t){m.filter((function(n){return n.id!==t})).find((function(n){return n.name.toLowerCase()===o.current[t].name.toLowerCase()||n.number===o.current[t].number}))?I.Notify.failure("".concat(o.current[t].name," is already in contacts. Please check and resubmit")):(s((0,d.Tk)({editedContact:o.current[t]})),a(null),o.current={})},g=function(t,n){var e=t.target.value,a=t.currentTarget.dataset.value;o.current[n][a]=e};return(0,L.jsx)("section",{className:z.contactsListSection,children:(0,L.jsx)(D.Z,{elevation:6,sx:{padding:"15px"},children:(0,L.jsx)("ul",{className:z.contactList,children:p.length>0?p.map((function(t){return(0,L.jsxs)("li",{className:z.contactListItem,children:[(0,L.jsx)("span",{className:z.contactName,children:e===t.id?(0,L.jsx)(Q(),{className:z.editableContact,html:t.name,disabled:!1,"data-value":"name",onChange:function(n){return g(n,t.id)}}):t.name}),(0,L.jsx)("span",{className:z.contactNumber,children:e===t.id?(0,L.jsx)(Q(),{className:z.editableContact,html:t.number,disabled:!1,"data-value":"number",onChange:function(n){return g(n,t.id)}}):t.number}),(0,L.jsx)("span",{className:z.contactAction,children:(0,L.jsx)(nt,{contactId:t.id,editableContactId:e,handleEditClick:Z,handleCancelClick:C,handleSaveClick:v})})]},t.id)})):(0,L.jsx)("li",{className:z.noContactsItem,children:(0,L.jsx)("p",{colSpan:3,className:z.noContactsText,children:"No contacts meet search criteria."})})})})})},at={contactsTitle:"Contacts_contactsTitle__9axPf"},ct=e(8094),it=function(){var t=(0,u.I0)(),n=j(),e=n.contacts,a=n.isLoading,c=(0,ct.a)(),i=c.isLoggedIn,o=c.user;return(0,l.useEffect)((function(){i&&t((0,d.yF)())}),[t,i]),(0,L.jsxs)("section",{className:at.phonebook,children:[!a&&(0,L.jsx)("h1",{className:at.contactsTitle,children:"".concat(o.name," Contacts")}),(0,L.jsx)(k,{}),a&&(0,L.jsx)("h5",{children:"Loading..."}),e.length>=2?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w,{}),(0,L.jsx)(K,{}),(0,L.jsx)(et,{})]}):1===e.length?(0,L.jsx)(et,{}):e.length<1&&!a?(0,L.jsx)("h5",{children:"No contacts found. Complete the above form to begin adding contacts."}):null]})},ot=it}}]);
//# sourceMappingURL=324.fc62fa8e.chunk.js.map